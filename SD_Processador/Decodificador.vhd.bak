library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity Decodificador is
    Port (
        addr : in std_logic_vector(7 downto 0);  -- Endereço (8 bits)
        data : out std_logic_vector(7 downto 0)  -- Dado da instrução
    );
end Decodificador;

architecture Behavioral of Decodificador is
    type memory_array is array (0 to 255) of std_logic_vector(7 downto 0);
    signal ROM_content : memory_array;

begin
    -- Carregar o arquivo .mif no sinal ROM_content durante a síntese
    process
    begin
        -- O nome do arquivo deve corresponder ao arquivo .mif
        file ROM_file : text is in "instrucoes.mif";
        read(ROM_file, ROM_content);  -- Carrega o conteúdo do arquivo .mif na ROM
        wait;
    end process;

    -- Atribuir o valor do dado com base no endereço
    data <= ROM_content(to_integer(unsigned(addr)));
end Behavioral;
